<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Citizen DJ Serendipity Engine</title>
  <meta name="description" content="Make beats using public audio and moving image materials">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="css/vendor/normalize.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/app.css">
</head>

<body>
  <div class="container">
    <header>
      <h1>The <a href="/">Citizen DJ</a> Hip Hop Serendipity Engine</h1>
    </header>
    <main id="sequencer">

      <div class="selectors">
        <div>
          <label for="select-item">Choose a public domain film or audio recording: </label>
          <select id="select-item" class="select-item"><option value="-1">Loading...</option></select>
        </div>
        <div>
          <label for="select-pattern">and a beat pattern from: </label>
          <select id="select-pattern" class="select-pattern"><option value="-1">Loading...</option></select>
        </div>
        <div>
          <label for="select-drum">and a drum machine: </label>
          <select id="select-drum" class="select-drum"><option value="-1">Loading...</option></select>?
        </div>
      </div>

      <hr />

      <nav aria-label="Controls" class="controls">
        <ul>
          <li><button class="toggle-play">Play</button></li>
          <!-- <li><button class="record">Record</button></li> -->
          <li><label for="tempo">BPM:</label> <input id="tempo" type="range" min="60" max="180" value="120" class="slider bpm-input" /> <span class="bpm-text value-text">120</span></li>
        </ul>
      </nav>

      <div class="sequence">
      </div>

      <nav aria-label="Sequence modifiers" class="sequence-modifiers">
        <div class="nav-group nav-group-collection active" role="group" title="Applies to all items in this collection">
          <h4><span>Item</span></h4>
          <div class="button-group">
            <button class="randomize-collection" title="Choose a random item in this collection">Randomize</button>
          </div>
        </div>
        <div class="nav-group nav-group-collection nav-group-collection-item active" role="group" title="Applies to just the phrases within the current item selected">
          <h4><span>Within current item</span></h4>
          <div class="button-group">
            <button class="prev-item" title="Choose the previous phrase within this item">Prev</button>
            <button class="randomize-item" title="Choose a random phrase within this item">Randomize</button>
            <button class="next-item" title="Choose the next phrase within this item">Next</button>
          </div>
        </div>
        <div class="nav-group nav-group-collection nav-group-collection-phrase active" role="group" title="Applies to just the current phrase within the current item selected">
          <h4><span>Within current item phrase</span></h4>
          <div class="button-group">
            <button class="prev-phrase" title="Step to previous sample within current phrase">Prev</button>
            <button class="randomize-phrase" title="Randomize the current phrase">Randomize</button>
            <button class="next-phrase" title="Step to next sample within current phrase">Next</button>
          </div>
        </div>
        <div class="nav-group nav-group-drum active" role="group">
          <h4><span>Drum pattern</span></h4>
          <div class="button-group">
            <button class="prev-drum" title="Step to previous bar within current song's drum pattern">Prev</button>
            <button class="randomize-drum" title="Choose a random drum pattern">Randomize</button>
            <button class="next-drum" title="Step to next bar within current song's drum pattern">Next</button>
          </div>
        </div>
      </nav>

      <hr />

      <h2>Where do these sounds come from and how can I use them?</h2>

      <div class="sources">
        <div id="item-source"></div>
        <div class="source">
          <h3>Drum machine sounds</h3>
          <p>All drum machine sounds were generated from drumkits provided by <a href="http://slackermedia.info/downloads/">Slackermedia</a> Multimedia Sprint v2 and were made available under a <a href="https://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-ShareAlike 3.0 license</a>. The audio files that I derived from the drumkits can be <a href="https://github.com/beefoo/citizendj/tree/master/audio/drum_machines">downloaded from Github</a> and is available under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Attribution-ShareAlike 4.0 International</a>, which means you can (1) copy and redistribute the files in any medium or format, and (2) remix, transform, and build upon the material for any purpose, even commercially as long as you give appropriate credit and distribute under the same license.</p>
        </div>
      </div>

    </main>
    <footer>
      <p>A <a href="http://citizendj.brianfoo.com">project</a> by <a href="http://brianfoo.com">Brian Foo</a> as part of the 2020 <a href="https://labs.loc.gov/people/innovator-in-residence-program">Innovator-in-Residence Program</a> at the <a href="https://www.loc.gov/">Library of Congress</a>.</p>
    </footer>
  </div>

  <div id="modal-track-settings" class="dialog-wrapper">
    <div role="dialog" class="dialog" aria-labelledby="modal-track-settings-label" aria-modal="true"></div>
  </div>

  <div class="templates">
    <!-- dialog template -->
    <div id="settings-template" class="template">
      <h2 id="modal-track-settings-label">
        Track settings for {{ title }}
      </h2>
      <div class="dialog-form">
        <div class="input-row">
          <label for="track-gain">Volume:</label>
          <input id="track-gain" type="range" min="-16" max="10" value="{{ gain }}" step="0.1" class="slider track-input gain-input" data-property="gain" data-target="#gain-text" />
          <span id="gain-text" class="value-text">{{ gain }}</span>
        </div>
        <div class="input-row">
          <label for="track-duration">Clip duration:</label>
          <input id="track-duration" type="range" min="0" max="{{ duration }}" step="0.001" value="{{ clipEnd }}" class="slider track-input duration-input" data-property="clipEnd" data-target="#duration-text" />
          <span id="duration-text" class="value-text">{{ clipEnd }}</span>
        </div>
        <!-- <div class="input-row">
          <label for="track-reverb">Reverb:</label>
          <input id="track-reverb" type="range" min="0" max="1" value="{{ reverb }}" step="0.01" class="slider track-input reverb-input" data-property="reverb" data-target="#reverb-text" />
          <span id="reverb-text" class="value-text">{{ reverb }}</span>
        </div>
        <div class="input-row">
          <label for="track-pitchShift">Pitch shift:</label>
          <input id="track-pitchShift" type="range" min="-24" max="24" value="{{ pitchShift }}" step="1" class="slider track-input pitchshift-input" data-property="pitchShift" data-target="#pitchShift-text" />
          <span id="pitchShift-text" class="value-text">{{ pitchShift }}</span>
        </div> -->
      </div>
      <div class="dialog-form-actions">
        <button class="dialog-close-button">Close</button>
      </div>
    </div>
    <!-- track template -->
    <div id="track-template" class="template">
      <div class="track track-{{ type }}">
        <div class="track-info"><h3 class="track-title-text">{{ title }}</h3></div>
        <div class="track-controls">
          <div class="beats">
            <button class="beat beat-0" data-col="0"></button><button class="beat beat-1" data-col="1"></button>
            <button class="beat beat-2" data-col="2"></button><button class="beat beat-3" data-col="3"></button>
            <button class="beat beat-4" data-col="4"></button><button class="beat beat-5" data-col="5"></button>
            <button class="beat beat-6" data-col="6"></button><button class="beat beat-7" data-col="7"></button>
            <button class="beat beat-8" data-col="8"></button><button class="beat beat-9" data-col="9"></button>
            <button class="beat beat-10" data-col="10"></button><button class="beat beat-11" data-col="11"></button>
            <button class="beat beat-12" data-col="12"></button><button class="beat beat-13" data-col="13"></button>
            <button class="beat beat-14" data-col="14"></button><button class="beat beat-15" data-col="15"></button>
          </div>
          <div class="modifiers">
            <button class="svg-button settings-button" title="track settings" aria-label="track settings">
              <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon" viewBox="0 0 100 125" x="0px" y="0px"><title>track settings</title><path d="M53,47.46V18H47V47.46a10,10,0,0,0,0,19.08V82h6V66.54a10,10,0,0,0,0-19.08ZM50,61a4,4,0,1,1,4-4A4,4,0,0,1,50,61Z"/><path d="M26,32.46V18H20V32.46a10,10,0,0,0,0,19.08V82h6V51.54a10,10,0,0,0,0-19.08ZM23,46a4,4,0,1,1,4-4A4,4,0,0,1,23,46Z"/><path d="M80,32.46V18H74V32.46a10,10,0,0,0,0,19.08V82h6V51.54a10,10,0,0,0,0-19.08ZM77,46a4,4,0,1,1,4-4A4,4,0,0,1,77,46Z"/></svg>
            </button>
            <button class="solo-button">solo</button>
            <button class="mute-button">mute</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/vendor/jquery-3.4.1.min.js"></script>
  <script src="js/vendor/underscore-1.9.1.min.js"></script>
  <script>
    _.templateSettings = {
      interpolate: /\{\{(.+?)\}\}/g
    };
  </script>
  <script src="js/vendor/tone-13.8.25.min.js"></script>
  <script src="js/lib/math.js"></script>
  <script src="js/lib/collections.js"></script>
  <script src="js/lib/drums.js"></script>
  <script src="js/lib/track.js"></script>
  <script src="js/lib/sequencer.js"></script>
  <script src="js/app.js"></script>
</body>

</html>
